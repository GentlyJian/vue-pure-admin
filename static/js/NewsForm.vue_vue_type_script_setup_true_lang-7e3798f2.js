import{aa as d}from"./index-abf2ad1d.js";import{x as P,r as m,w as T,V as v,a7 as r,y as V,H,I as a,A as L,P as o,M as y,z as M,a0 as O,F as S,u as b,g as j}from"./runtime-core.esm-bundler-5e6ff93b.js";const W=n=>d.request("post","/getNews",{data:n}),D=n=>d.request("post","/saveNews",{data:n}),X=n=>d.request("post","/delNews",{data:n}),G=n=>d.request("post","/updateNews",{data:n}),J={class:"dialog-footer"},Y=P({__name:"NewsForm",props:{content_id:Number},emits:["init"],setup(n,{expose:N,emit:x}){const F=n,p=m(!1),c=m("新增新闻"),{appContext:{config:{globalProperties:_}}}=j();T(()=>F.content_id,(l,e)=>{});const q=[{lable:"技术",value:"技术"},{lable:"民事",value:"民事"}],C=m("default"),g=m(),s=v({t_id:0,title:"",type:"",tag:[1],resource:"",content_id:"",content:""}),$=v({title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:25,message:"长度应该在3-25个字",trigger:"blur"}],type:[{required:!0,message:"请选择文章类型",trigger:"change"}],tag:[{type:"array",required:!0,message:"请选择文章标签",trigger:"change"}],content:[{required:!0,validator:(l,e,u)=>{if(!e)u(new Error("请输入文章内容"));else{if(e==="#")return new Error("error character");e.length<5||e.length>500?u(new Error("文章内容请控制在5-500字")):u()}},trigger:"blur"}]}),h=async l=>{l&&await l.validate(async(e,u)=>{if(e){const i=c.value==="新增新闻"?A:U,f={news:{...s}};await i(f),await x("init"),_.$message.success("接口调用成功"),setTimeout(()=>{p.value=!1},2e3)}else _.$message.error("字段校验失败")})},k=l=>{l&&(b(l).resetFields(),p.value=!1)},z=Array.from({length:1e4}).map((l,e)=>({value:`${e+1}`,label:`${e+1}`})),U=async l=>{await G(l)},A=async l=>{await D(l)};return N({visible:p,title:c,newsForm:s}),(l,e)=>{const u=r("el-input"),i=r("el-form-item"),f=r("el-option"),B=r("el-select"),R=r("el-select-v2"),E=r("el-form"),w=r("el-button"),I=r("el-dialog");return V(),H(I,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=t=>p.value=t),title:c.value,"align-center":""},{footer:a(()=>[L("span",J,[o(w,{onClick:e[4]||(e[4]=t=>k(g.value))},{default:a(()=>[y("取消")]),_:1}),o(w,{type:"primary",onClick:e[5]||(e[5]=t=>h(g.value))},{default:a(()=>[y(" 确认 ")]),_:1})])]),default:a(()=>[o(E,{ref_key:"newsFormRef",ref:g,model:s,rules:$,"label-width":"120px",class:"demo-ruleForm",size:C.value,"status-icon":""},{default:a(()=>[o(i,{label:"文章标题",prop:"title"},{default:a(()=>[o(u,{modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.title=t)},null,8,["modelValue"])]),_:1}),o(i,{label:"文章类型",prop:"type"},{default:a(()=>[o(B,{modelValue:s.type,"onUpdate:modelValue":e[1]||(e[1]=t=>s.type=t),placeholder:"请选择文章类型",clearable:""},{default:a(()=>[(V(),M(S,null,O(q,t=>o(f,{value:t.value,key:t.value},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(i,{label:"文章标签",prop:"tag"},{default:a(()=>[o(R,{style:{width:"240px"},multiple:"",modelValue:s.tag,"onUpdate:modelValue":e[2]||(e[2]=t=>s.tag=t),options:b(z),placeholder:"请选择文章标签"},null,8,["modelValue","options"])]),_:1}),o(i,{label:"文章内容",prop:"content"},{default:a(()=>[o(u,{modelValue:s.content,"onUpdate:modelValue":e[3]||(e[3]=t=>s.content=t),type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入文章内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","size"])]),_:1},8,["modelValue","title"])}}});export{Y as _,X as d,W as g};
