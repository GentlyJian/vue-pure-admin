import{aa as m}from"./index-f59f4494.js";import{x as T,r as d,w as E,V,a7 as r,y,H,I as a,A as L,P as l,M as b,z as M,a0 as O,F as S,u as N,g as j}from"./runtime-core.esm-bundler-5e6ff93b.js";const W=n=>m.request("post","/getNews",{data:n}),D=n=>m.request("post","/saveNews",{data:n}),X=n=>m.request("post","/delNews",{data:n}),G=n=>m.request("post","/updateNews",{data:n}),J={class:"dialog-footer"},Y=T({__name:"NewsForm",props:{content_id:Number},emits:["init"],setup(n,{expose:x,emit:F}){const q=n,p=d(!1),c=d("新增新闻"),{appContext:{config:{globalProperties:f}}}=j();E(()=>q.content_id,(t,e)=>{});const C=[{lable:"技术",value:"技术"},{lable:"民事",value:"民事"}],$=d("default"),g=d(),s=V({t_id:0,title:"",type:"",tag:[1],resource:"",content_id:"",content:""}),h=V({title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:25,message:"长度应该在3-25个字",trigger:"blur"}],type:[{required:!0,message:"请选择文章类型",trigger:"change"}],tag:[{type:"array",required:!0,message:"请选择文章标签",trigger:"change"}],content:[{required:!0,validator:(t,e,u)=>{if(!e)u(new Error("请输入文章内容"));else{if(e==="#")return new Error("error character");e.length<5||e.length>500?u(new Error("文章内容请控制在5-500字")):u()}},trigger:"blur"}]}),k=async t=>{t&&await t.validate(async(e,u)=>{if(e){const i=c.value==="新增新闻"?A:U,_={news:{...s}};await i(_),await F("init"),f.$message.success("接口调用成功"),setTimeout(()=>{w(t)},1e3)}else f.$message.error("字段校验失败")})},w=t=>{t&&(N(t).resetFields(),p.value=!1)},z=Array.from({length:1e4}).map((t,e)=>({value:`${e+1}`,label:`${e+1}`})),U=async t=>{await G(t)},A=async t=>{await D(t)};return x({visible:p,title:c,newsForm:s}),(t,e)=>{const u=r("el-input"),i=r("el-form-item"),_=r("el-option"),B=r("el-select"),R=r("el-select-v2"),I=r("el-form"),v=r("el-button"),P=r("el-dialog");return y(),H(P,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),title:c.value,"align-center":""},{footer:a(()=>[L("span",J,[l(v,{onClick:e[4]||(e[4]=o=>w(g.value))},{default:a(()=>[b("取消")]),_:1}),l(v,{type:"primary",onClick:e[5]||(e[5]=o=>k(g.value))},{default:a(()=>[b(" 确认 ")]),_:1})])]),default:a(()=>[l(I,{ref_key:"newsFormRef",ref:g,model:s,rules:h,"label-width":"120px",class:"demo-ruleForm",size:$.value,"status-icon":""},{default:a(()=>[l(i,{label:"文章标题",prop:"title"},{default:a(()=>[l(u,{modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=o=>s.title=o)},null,8,["modelValue"])]),_:1}),l(i,{label:"文章类型",prop:"type"},{default:a(()=>[l(B,{modelValue:s.type,"onUpdate:modelValue":e[1]||(e[1]=o=>s.type=o),placeholder:"请选择文章类型",clearable:""},{default:a(()=>[(y(),M(S,null,O(C,o=>l(_,{value:o.value,key:o.value},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"文章标签",prop:"tag"},{default:a(()=>[l(R,{style:{width:"240px"},multiple:"",modelValue:s.tag,"onUpdate:modelValue":e[2]||(e[2]=o=>s.tag=o),options:N(z),placeholder:"请选择文章标签"},null,8,["modelValue","options"])]),_:1}),l(i,{label:"文章内容",prop:"content"},{default:a(()=>[l(u,{modelValue:s.content,"onUpdate:modelValue":e[3]||(e[3]=o=>s.content=o),type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入文章内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","size"])]),_:1},8,["modelValue","title"])}}});export{Y as _,X as d,W as g};
